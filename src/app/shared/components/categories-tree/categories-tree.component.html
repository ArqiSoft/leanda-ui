<div
  matRipple
  matTooltipPosition="right"
  matTooltip="{{ entitiyFilter?.title }}"
  class="filter-box justify-content-between"
  [class.selected]="currentFilter === 'all' && selectedNode?.guid === ''"
  [matTooltipDisabled]="!sidebarContent.sidebarCollapsed"
  (click)="displayAllFiles()"
>
  <div class="d-flex">
    <img class="mr-2" src="/img/svg/entity-counters/{{ entitiyFilter?.key }}.svg" />
    <span *ngIf="!sidebarContent.sidebarCollapsed" class="filter-box--text text-capitalize">{{ entitiyFilter?.title }}</span>
  </div>
  <div
    class="filter-box--counter e2e-entity-{{ entitiyFilter?.key }}-amount badge badge-default badge-pill"
    [ngClass]="{ collapsed: sidebarContent.sidebarCollapsed }"
  >
    {{ entitiyFilter?.count }}
  </div>
</div>
<ng-content></ng-content>

<mat-tree [dataSource]="dataSource" [treeControl]="treeControl" class="tree">
  <mat-tree-node *matTreeNodeDef="let node" matTreeNodeToggle>
    <li
      class="mat-tree-node c-pointer"
      matTreeNodeToggle
      matRipple
      [ngClass]="{ selected: selectedNode?.guid === node.guid }"
      (click)="selectCategory(node)"
    >
      <button mat-icon-button disabled></button>
      {{ node.title }}
    </li>
  </mat-tree-node>

  <mat-nested-tree-node *matTreeNodeDef="let node; when: hasChild">
    <li>
      <div
        class="mat-tree-node c-pointer"
        matTreeNodeToggle
        matRipple
        [ngClass]="{ selected: selectedNode?.guid === node.guid }"
        (click)="selectCategory(node)"
      >
        <button mat-icon-button [attr.aria-label]="'toggle ' + node.title">
          <mat-icon class="mat-icon-rtl-mirror">
            {{ treeControl.isExpanded(node) ? 'expand_more' : 'chevron_right' }}
          </mat-icon>
        </button>
        {{ node.title }}
      </div>
      <ul [class.tree-invisible]="!treeControl.isExpanded(node)">
        <ng-container matTreeNodeOutlet></ng-container>
      </ul>
    </li>
  </mat-nested-tree-node>
</mat-tree>
